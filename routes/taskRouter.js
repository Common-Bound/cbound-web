const express = require("express");
const router = express.Router();
const db = require("../db/index");
const uuid = require("uuid/v4");
const axios = require("axios");

// path: ~/task
router.post("/", (req, res, next) => {
  if (!req.user) {
    return res.status(401).json({ result: false });
  }

  //const imageSrc = req.body.Src;
  // AI 서버로 base64 형태로 인코딩된 파일 전송
  const imageSrc =
    "data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAFA3PEY8MlBGQUZaVVBfeMiCeG5uePWvuZHI////////////////////////////////////////////////////2wBDAVVaWnhpeOuCguv/////////////////////////////////////////////////////////////////////////wAARCAGeAqoDASIAAhEBAxEB/8QAGQABAAMBAQAAAAAAAAAAAAAAAAIDBAEF/8QANBAAAgIBAgQEBQQCAwEAAwAAAAECAxEEEiExQVETM2FxFCIyNIFScpGhI0JiscGCJETh/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhEDEQA/ANoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAclJRWZNIDoAAAAAAAAAAAAACMpxjjLSzwRIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAg7q08OaySTTWU8oDoAAAAAAAAAAAAAAAAAAAAAAAAAAELIOfKco+zJgDz7ndTPa7JPs8lmnjbatztko+5HXeZH2LtH5C9wLox2xSy36skCu22NSWeb5ICwAAAAAAAAAAAAAAAAAAAAAAAAAAAVytjGyMOcmWAQsU3D/HJKXqedZKbm1Nttdz1DzbPun+4D0VyR04dAAAAAAAAAFdyscf8ckmWADzISk747m29y5npnlx+4X7v/T1AAAAAAAAAAAAAAACM5xri5SfAQlvgpLqsgSAAAAAAAAAAHDM3LU2OMW41x5tdSernspeOb4EdEv8AC/cCE9E8/JLh/wAjRTB11Rg3losAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABh13mR9i/R+Qvco13mR9i/R+QvcCy2bhByUXJ9jzZ2SnPdJ8T1Ty5ec/wBwGn4m3HlF9M3ZWpNYb6FgAFdspxWYRUu5YAMT1s08OCNNUrJxzKKWeXEy62vbNTXJmjTT30ruuDAqs1VlctsoL+SdN9lr4QSj1eSvX4+TuS0MswlHs8gWX2TrW6MU49SFV9tr+WtY75JaueK9i5zeCyqCrrUV0A5bdCpfM+PZFLlqZrdBKK6dzlumnZc5bltZqSwsAZKtVNT2298Z7Gw87U4+JljuehH6V7AUX6jw5bIL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";
  const url =
    "http://ec2-13-209-99-40.ap-northeast-2.compute.amazonaws.com:8080/ocr/api/";
  axios
    .post(url, {
      id: 0,
      method: "post",
      orig_image: imageSrc
    })
    .then(res => res.data)
    .then(data => {
      console.log(data);
      return res.json({ data: data });
    })
    .catch(err => {
      console.log(err);
      return res.json(500).json({ error: err });
    });
});

router.post("/complete", (req, res, next) => {
  // 유저 로그인 여부 검사
  if (!req.user) {
    return res.status(401).json({ result: false });
  }

  const user_id = req.user.id;
  const body = req.body;
  const id = uuid();
  const date = Date();
  // id, type, payload(json), created_at, status,
  // creator_id, ck1_id, ck2_id, project_id
  db.query(
    "insert into data values($1, $2, $3, $4, $5, $6, $7, $8, $9)",
    [id, "image", body, date, "created", user_id, null, null, null],
    (err, result) => {
      if (err) {
        console.log(err);
        return res.status(500).send(err);
      }
      return res.json({ result: true });
    }
  );
});

module.exports = router;
